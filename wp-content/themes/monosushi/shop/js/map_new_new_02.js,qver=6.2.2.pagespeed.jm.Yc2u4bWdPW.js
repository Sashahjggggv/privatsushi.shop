let GeoLocation={};jQuery(function($){"use strict";var theme_uri=$('#map').data('url');let markers=[],staticMarkers=[],streets=[],map,myLatlng,marker,image,noDataBase,streetFromAutoComplete,checkAutocompleteSelect,redZone,redZone2,redZone3,greenZone,greenZone2,yellowZone,yellowZone2,step1=false,step2=false,step3=false;let ibOptions={alignBottom:true,content:'text',pixelOffset:new google.maps.Size(($(window).width()<565)?-150:-163,-40),boxStyle:{width:($(window).width()<565)?"300px":"326px"},closeBoxMargin:"5px 5px 5px 5px",closeBoxURL:theme_uri+'/img/icon-close2.png'},ib=new InfoBox(ibOptions);function addMarker(location){image={url:$('#map').attr('data-map-marker'),};marker=new google.maps.Marker({position:location,icon:image,});markers.push(marker);marker.setMap(map);map.panTo(location);}function addStaticMarker(location,map,string,image,value){const staticMarker=new google.maps.Marker({position:location,map:map,icon:image,number:value});const content='<div class="info-box">'+string+'</div>';google.maps.event.addListener(staticMarker,'click',function(){ib.setContent(content);ib.setPosition(location);ib.open(map);});staticMarkers.push(staticMarker)}function initialize(){const $mapEL=$('#map');let lat=$mapEL.attr("data-lat"),lng=$mapEL.attr("data-lng"),isAddressMap=$mapEL.hasClass('address-map');myLatlng=new google.maps.LatLng(lat,lng);let setZoom=parseInt($mapEL.attr("data-zoom"));let styles=[{"featureType":"landscape.man_made","elementType":"geometry","stylers":[{"color":"#f7f1df"}]},{"featureType":"landscape.natural","elementType":"geometry","stylers":[{"color":"#d0e3b4"}]},{"featureType":"landscape.natural.terrain","elementType":"geometry","stylers":[{"visibility":"off"}]},{"featureType":"poi","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"poi.business","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"poi.medical","elementType":"geometry","stylers":[{"color":"#fbd3da"}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#bde6ab"}]},{"featureType":"road","elementType":"geometry.stroke","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"labels","stylers":[{"visibility":"on"}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#ffe15f"}]},{"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"color":"#efd151"}]},{"featureType":"road.arterial","elementType":"geometry.fill","stylers":[{"color":"#ffffff"}]},{"featureType":"road.local","elementType":"geometry.fill","stylers":[{"color":"black"}]},{"featureType":"transit.station.airport","elementType":"geometry.fill","stylers":[{"color":"#cfb2db"}]},{"featureType":"water","elementType":"geometry","stylers":[{"color":"#a2daf2"}]}];let styledMap=new google.maps.StyledMapType(styles,{name:"Styled Map"});let mapOptions={zoom:setZoom,zoomControl:true,center:myLatlng,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,'map_style']},fullscreenControl:false,mapTypeControl:false,streetViewControl:false};const redZonePath=[{lng:24.0783222,lat:49.8533581},{lng:24.0757949,lat:49.8602805},{lng:24.0733451,lat:49.8605007},{lng:24.0708953,lat:49.8603888},{lng:24.070998,lat:49.8562515},{lng:24.0684829,lat:49.8543272},{lng:24.06375,lat:49.850781},{lng:24.0628065,lat:49.8413824},{lng:24.0619602,lat:49.8401885},{lng:24.06091,lat:49.839313},{lng:24.0585729,lat:49.8361506},{lng:24.0576512,lat:49.8347908},{lng:24.0601293,lat:49.8327552},{lng:24.0762993,lat:49.8318446},{lng:24.0768705,lat:49.8318455},{lng:24.0816139,lat:49.831026},{lng:24.0825821,lat:49.8308956},{lng:24.0831238,lat:49.8308841},{lng:24.0837852,lat:49.8310178},{lng:24.0841462,lat:49.8312761},{lng:24.0844391,lat:49.8315711},{lng:24.0847244,lat:49.8316492},{lng:24.0849947,lat:49.8316047},{lng:24.0854495,lat:49.8315156},{lng:24.0863754,lat:49.8316869},{lng:24.0869247,lat:49.8322057},{lng:24.0865844,lat:49.8328834},{lng:24.0873843,lat:49.8339206},{lng:24.0866239,lat:49.8348461},{lng:24.0858971,lat:49.8360746},{lng:24.0859749,lat:49.8372617},{lng:24.0856236,lat:49.8375214},{lng:24.0854801,lat:49.8378771},{lng:24.0854224,lat:49.8383642},{lng:24.0855861,lat:49.8388126},{lng:24.0916212,lat:49.8401245},{lng:24.0940059,lat:49.8422997},{lng:24.0938833,lat:49.8455555},{lng:24.0847483,lat:49.8484516},{lng:24.0783222,lat:49.853358},];const redZonePath2=[{lng:24.0817048,lat:49.8026328},{lng:24.0810678,lat:49.8042823},{lng:24.0805862,lat:49.8057666},{lng:24.0803064,lat:49.8060466},{lng:24.079942,lat:49.8061214},{lng:24.0795037,lat:49.8060805},{lng:24.0785493,lat:49.8058086},{lng:24.0783496,lat:49.8064544},{lng:24.078064,lat:49.8070897},{lng:24.0794776,lat:49.8074741},{lng:24.0805889,lat:49.8089551},{lng:24.0801257,lat:49.8094944},{lng:24.0800844,lat:49.8098183},{lng:24.0802144,lat:49.8099752},{lng:24.080566,lat:49.8101299},{lng:24.0814486,lat:49.8103226},{lng:24.0850655,lat:49.8101291},{lng:24.0862123,lat:49.8101908},{lng:24.0868777,lat:49.810437},{lng:24.0872696,lat:49.8107005},{lng:24.0883544,lat:49.8129697},{lng:24.0891188,lat:49.8157494},{lng:24.0848459,lat:49.8159403},{lng:24.0872278,lat:49.8167869},{lng:24.0912801,lat:49.8187226},{lng:24.0927917,lat:49.8197973},{lng:24.0929421,lat:49.8202909},{lng:24.092623,lat:49.8207274},{lng:24.0927413,lat:49.8211471},{lng:24.0930375,lat:49.8214966},{lng:24.0935135,lat:49.8219326},{lng:24.0935763,lat:49.8222649},{lng:24.0864938,lat:49.8261501},{lng:24.0756033,lat:49.8281467},{lng:24.0752802,lat:49.828305},{lng:24.0749685,lat:49.8286194},{lng:24.074877,lat:49.8290812},{lng:24.075279,lat:49.8307056},{lng:24.0754404,lat:49.8310173},{lng:24.075843,lat:49.8315642},{lng:24.0762952,lat:49.8318308},{lng:24.0601427,lat:49.8327422},{lng:24.0654753,lat:49.8309641},{lng:24.0694829,lat:49.8261732},{lng:24.0735463,lat:49.8242205},{lng:24.0745021,lat:49.8216271},{lng:24.0760644,lat:49.8173391},{lng:24.0773766,lat:49.8143121},{lng:24.0783758,lat:49.812217},{lng:24.0789353,lat:49.8103178},{lng:24.0773696,lat:49.8083157},{lng:24.0768013,lat:49.8069546},{lng:24.0771507,lat:49.8053748},{lng:24.079978,lat:49.8018017},{lng:24.0661502,lat:49.7951531},{lng:24.0659514,lat:49.7937301},{lng:24.0652376,lat:49.7927504},{lng:24.0590897,lat:49.7893503},{lng:24.0538955,lat:49.7892692},{lng:24.0474791,lat:49.7891464},{lng:24.0449791,lat:49.7890711},{lng:24.0443674,lat:49.7878875},{lng:24.0407488,lat:49.7859457},{lng:24.0364869,lat:49.7818147},{lng:24.0523119,lat:49.7806716},{lng:24.0693941,lat:49.7808805},{lng:24.071863,lat:49.7810812},{lng:24.0740845,lat:49.7815141},{lng:24.0792244,lat:49.7834986},{lng:24.0941237,lat:49.7920911},{lng:24.0931876,lat:49.7937883},{lng:24.0921121,lat:49.7952777},{lng:24.0916588,lat:49.7958114},{lng:24.0911482,lat:49.7961676},{lng:24.0899317,lat:49.796647},{lng:24.0885693,lat:49.7968679},{lng:24.0874432,lat:49.7975658},{lng:24.0817048,lat:49.8026328}];const redZonePath3=[{lng:23.9543076,lat:49.8391716},{lng:23.9426231,lat:49.8258507},{lng:23.9454238,lat:49.8235527},{lng:23.9483958,lat:49.8211298},{lng:23.9495062,lat:49.8201882},{lng:23.9507078,lat:49.8192068},{lng:23.9547151,lat:49.8206257},{lng:23.9600099,lat:49.8212691},{lng:23.963409,lat:49.8215292},{lng:23.9665891,lat:49.8218945},{lng:23.9680526,lat:49.8226198},{lng:23.9682291,lat:49.8261827},{lng:23.969476,lat:49.8261094},{lng:23.9796495,lat:49.8294136},{lng:23.9781376,lat:49.8330522},{lng:23.9737919,lat:49.8335258},{lng:23.9646663,lat:49.8351523},{lng:23.9582833,lat:49.8371897},{lng:23.9543076,lat:49.8391716},];const greenZonePath2=[{lng:23.9905346,lat:49.826702},{lng:23.9900638,lat:49.8242527},{lng:23.9880491,lat:49.8178581},{lng:23.9845163,lat:49.8119226},{lng:23.9828041,lat:49.8120977},{lng:23.982036,lat:49.8089496},{lng:23.9708763,lat:49.8102576},{lng:23.9697975,lat:49.8044378},{lng:23.9794681,lat:49.7978831},{lng:23.9959751,lat:49.7961495},{lng:24.0163859,lat:49.7939905},{lng:24.0276422,lat:49.7923892},{lng:24.0289331,lat:49.7950606},{lng:24.0368825,lat:49.8087671},{lng:24.0397301,lat:49.8083115},{lng:24.0423079,lat:49.8079959},{lng:24.0450896,lat:49.8076248},{lng:24.0467769,lat:49.8075999},{lng:24.0466708,lat:49.8086359},{lng:24.0463072,lat:49.8102121},{lng:24.0447153,lat:49.8130364},{lng:24.0435169,lat:49.8138117},{lng:24.0442588,lat:49.8141162},{lng:24.0446789,lat:49.8148362},{lng:24.0442247,lat:49.8164696},{lng:24.0441662,lat:49.8173072},{lng:24.0434347,lat:49.8178798},{lng:24.041598,lat:49.8185356},{lng:24.0404105,lat:49.8191429},{lng:24.0395768,lat:49.820193},{lng:24.0370406,lat:49.823079},{lng:24.0367633,lat:49.8235012},{lng:24.0365826,lat:49.8241517},{lng:24.0350789,lat:49.8250667},{lng:24.0341104,lat:49.8258597},{lng:24.0334728,lat:49.8264689},{lng:24.0337171,lat:49.827212},{lng:24.0337092,lat:49.8277544},{lng:24.0335082,lat:49.8282968},{lng:24.0324902,lat:49.8289817},{lng:24.0310711,lat:49.8288618},{lng:24.0304325,lat:49.8287772},{lng:24.0289518,lat:49.8286665},{lng:24.0271787,lat:49.8288727},{lng:24.0248696,lat:49.8290268},{lng:24.0233114,lat:49.829513},{lng:24.0226082,lat:49.8294818},{lng:24.0218366,lat:49.8296793},{lng:24.0209428,lat:49.8300511},{lng:24.017781,lat:49.8267171},{lng:24.0106415,lat:49.8273817},{lng:24.007465,lat:49.8300166},{lng:24.0016923,lat:49.8320423},{lng:24.000159,lat:49.8330851},{lng:23.9916197,lat:49.8289367},{lng:23.9903888,lat:49.8288352},{lng:23.9905346,lat:49.826702}];const greenZonePath=[{lat:49.8463967,lng:24.0292047},{lat:49.8473559,lng:24.0286831},{lat:49.8503789,lng:24.0286461},{lat:49.8514466,lng:24.0304425},{lat:49.8530278,lng:24.0353816},{lat:49.8533688,lng:24.038806},{lat:49.8535506,lng:24.0404064},{lat:49.8539038,lng:24.0439302},{lat:49.8645077,lng:24.0530535},{lat:49.8699089,lng:24.0573167},{lat:49.8732117,lng:24.0496788},{lat:49.8765139,lng:24.0410097},{lat:49.8856968,lng:24.0301769},{lat:49.8860759,lng:24.0285338},{lat:49.886455,lng:24.0267295},{lat:49.8867494,lng:24.0250165},{lat:49.8869376,lng:24.0241975},{lat:49.8872018,lng:24.0231157},{lat:49.8877598,lng:24.0212157},{lat:49.8879956,lng:24.0206707},{lat:49.8880914,lng:24.0202813},{lat:49.8882094,lng:24.013756},{lat:49.8852217,lng:24.0119515},{lat:49.8790929,lng:24.0055139},{lat:49.8781286,lng:24.0028254},{lat:49.8763698,lng:23.9982989},{lat:49.8744449,lng:23.9959185},{lat:49.8715699,lng:23.9888188},{lat:49.8629706,lng:23.989414},{lat:49.8548005,lng:23.9830964},{lat:49.8533342,lng:23.9868635},{lat:49.852514,lng:23.9883137},{lat:49.8510527,lng:23.9914876},{lat:49.8492592,lng:23.9958628},{lat:49.8475873,lng:24.0013257},{lat:49.8464321,lng:24.0051025},{lat:49.8456574,lng:24.0072465},{lat:49.8445645,lng:24.010356},{lat:49.8428765,lng:24.0154162},{lat:49.8425723,lng:24.0181119},{lat:49.8431815,lng:24.0229454},{lat:49.8441504,lng:24.0246731},{lat:49.8443028,lng:24.0254138},{lat:49.8446213,lng:24.0270987},{lat:49.8446774,lng:24.029289},{lat:49.8463967,lng:24.0292047}];const yellowZonePath2=[{lng:23.9507078,lat:49.8192068},{lng:23.9542449,lat:49.8162732},{lng:23.9548425,lat:49.8146245},{lng:23.9697599,lat:49.8044586},{lng:23.9708763,lat:49.8102576},{lng:23.982036,lat:49.8089496},{lng:23.9828041,lat:49.8120977},{lng:23.9845163,lat:49.8119226},{lng:23.9880491,lat:49.8178581},{lng:23.9900638,lat:49.8242527},{lng:23.9905346,lat:49.826702},{lng:23.9903888,lat:49.8288352},{lng:23.9916197,lat:49.8289367},{lng:24.0016923,lat:49.8320423},{lng:24.007465,lat:49.8300166},{lng:24.0106415,lat:49.8273817},{lng:24.017781,lat:49.8267171},{lng:24.0209428,lat:49.8300511},{lng:24.0218366,lat:49.8296793},{lng:24.0226082,lat:49.8294818},{lng:24.0233114,lat:49.829513},{lng:24.0248696,lat:49.8290268},{lng:24.0271787,lat:49.8288727},{lng:24.0289518,lat:49.8286665},{lng:24.0304325,lat:49.8287772},{lng:24.0310711,lat:49.8288618},{lng:24.0324902,lat:49.8289817},{lng:24.0335082,lat:49.8282968},{lng:24.0337092,lat:49.8277544},{lng:24.0337171,lat:49.827212},{lng:24.0334728,lat:49.8264689},{lng:24.0341104,lat:49.8258597},{lng:24.0350789,lat:49.8250667},{lng:24.0365826,lat:49.8241517},{lng:24.0367633,lat:49.8235012},{lng:24.0370406,lat:49.823079},{lng:24.0395768,lat:49.820193},{lng:24.0403299,lat:49.8192328},{lng:24.041598,lat:49.8185356},{lng:24.0434347,lat:49.8178798},{lng:24.0441662,lat:49.8173072},{lng:24.0442247,lat:49.8164696},{lng:24.0446789,lat:49.8148362},{lng:24.0442588,lat:49.8141162},{lng:24.0435169,lat:49.8138117},{lng:24.0447153,lat:49.8130364},{lng:24.0463072,lat:49.8102121},{lng:24.0466708,lat:49.8086359},{lng:24.0467769,lat:49.8075999},{lng:24.0450896,lat:49.8076248},{lng:24.0423079,lat:49.8079959},{lng:24.0397301,lat:49.8083115},{lng:24.0368825,lat:49.8087671},{lng:24.0289331,lat:49.7950606},{lng:24.0276637,lat:49.7923892},{lng:24.0164074,lat:49.7939905},{lng:23.9959966,lat:49.7961495},{lng:23.9972082,lat:49.7925484},{lng:24.0139054,lat:49.7835927},{lng:24.0205348,lat:49.7828539},{lng:24.0364332,lat:49.7817593},{lng:24.0407488,lat:49.7859457},{lng:24.0443674,lat:49.7878875},{lng:24.0449791,lat:49.7890711},{lng:24.0474791,lat:49.7891464},{lng:24.0538955,lat:49.7892692},{lng:24.0590897,lat:49.7893503},{lng:24.0652376,lat:49.7927504},{lng:24.0659514,lat:49.7937301},{lng:24.0661502,lat:49.7951531},{lng:24.079978,lat:49.8018017},{lng:24.0771507,lat:49.8053748},{lng:24.0768013,lat:49.8069546},{lng:24.0773696,lat:49.8083157},{lng:24.0789353,lat:49.8103178},{lng:24.0783758,lat:49.812217},{lng:24.0773766,lat:49.8143121},{lng:24.0760644,lat:49.8173391},{lng:24.0745021,lat:49.8216271},{lng:24.0735463,lat:49.8242205},{lng:24.0694829,lat:49.8261732},{lng:24.0654753,lat:49.8309641},{lng:24.0601427,lat:49.8327422},{lng:24.0351468,lat:49.8374493},{lng:24.0201632,lat:49.8350676},{lng:24.0076907,lat:49.8351888},{lng:24.0030939,lat:49.8367525},{lng:23.9967856,lat:49.8356298},{lng:23.984835,lat:49.8334458},{lng:23.9781537,lat:49.833028},{lng:23.9796495,lat:49.8294136},{lng:23.969476,lat:49.8261094},{lng:23.9682291,lat:49.8261827},{lng:23.9680526,lat:49.8226198},{lng:23.9665891,lat:49.8218945},{lng:23.963409,lat:49.8215292},{lng:23.9600099,lat:49.8212691},{lng:23.9547151,lat:49.8206257},{lng:23.9507078,lat:49.8192068}];const yellowZonePath=[{lng:24.018112,lat:49.8425724},{lng:24.0154163,lat:49.8428766},{lng:24.0127871,lat:49.8437526},{lng:24.010933,lat:49.8443709},{lng:24.0103629,lat:49.8445611},{lng:24.0101493,lat:49.8446364},{lng:24.0074737,lat:49.8455769},{lng:24.0072465,lat:49.8456574},{lng:24.0062922,lat:49.8460015},{lng:24.0051025,lat:49.8464322},{lng:24.0027916,lat:49.8471384},{lng:24.0013257,lat:49.8475873},{lng:24.0004799,lat:49.8478458},{lng:23.9958629,lat:49.8492593},{lng:23.9936261,lat:49.8501752},{lng:23.9933524,lat:49.8502883},{lng:23.9930739,lat:49.8504023},{lng:23.9925176,lat:49.8506301},{lng:23.9919578,lat:49.8508599},{lng:23.9915598,lat:49.8510226},{lng:23.9915406,lat:49.8510303},{lng:23.9914809,lat:49.8510547},{lng:23.9914012,lat:49.8510919},{lng:23.9909962,lat:49.8512785},{lng:23.990628,lat:49.8514479},{lng:23.9898897,lat:49.8517878},{lng:23.9884612,lat:49.8524456},{lng:23.9883167,lat:49.8525119},{lng:23.9882041,lat:49.8525751},{lng:23.987976,lat:49.8527041},{lng:23.987591,lat:49.852921},{lng:23.9868624,lat:49.8533328},{lng:23.9830964,lat:49.8548006},{lng:23.9761655,lat:49.8531436},{lng:23.971685,lat:49.8520847},{lng:23.9591834,lat:49.8490945},{lng:23.9567989,lat:49.8423111},{lng:23.9543258,lat:49.8391898},{lng:23.9583074,lat:49.837207},{lng:23.9646958,lat:49.8351696},{lng:23.973812,lat:49.8335418},{lng:23.978163,lat:49.833073},{lng:23.9848886,lat:49.8334943},{lng:23.9968392,lat:49.8356783},{lng:24.0031475,lat:49.836801},{lng:24.0077443,lat:49.8352373},{lng:24.0202168,lat:49.8351161},{lng:24.0352004,lat:49.8374978},{lng:24.0601293,lat:49.8327552},{lng:24.0576512,lat:49.8347908},{lng:24.0585729,lat:49.8361506},{lng:24.06091,lat:49.839313},{lng:24.0619602,lat:49.8401885},{lng:24.0628065,lat:49.8413824},{lng:24.06375,lat:49.850781},{lng:24.0684829,lat:49.8543272},{lng:24.070998,lat:49.8562515},{lng:24.0708953,lat:49.8603888},{lng:24.0733451,lat:49.8605007},{lng:24.0757949,lat:49.8602805},{lng:24.0728464,lat:49.8683673},{lng:24.0697314,lat:49.8737208},{lng:24.0639023,lat:49.8776631},{lng:24.0301769,lat:49.8856968},{lng:24.0410097,lat:49.8765139},{lng:24.0496788,lat:49.8732117},{lng:24.0573167,lat:49.8699089},{lng:24.0530535,lat:49.8645077},{lng:24.0439302,lat:49.8539038},{lng:24.0404064,lat:49.8535506},{lng:24.038806,lat:49.8533688},{lng:24.0353816,lat:49.8530278},{lng:24.0304425,lat:49.8514466},{lng:24.0286461,lat:49.8503789},{lng:24.0286831,lat:49.8473559},{lng:24.0292047,lat:49.8463967},{lng:24.029289,lat:49.8446774},{lng:24.0270987,lat:49.8446213},{lng:24.0254138,lat:49.8443028},{lng:24.0246731,lat:49.8441504},{lng:24.0229454,lat:49.8431815},{lng:24.018112,lat:49.8425724}];var red_zone_1=$('#zone_red_check').data('red_zone1');if(red_zone_1=='1'){redZone=new google.maps.Polygon({paths:redZonePath,strokeColor:'#FF0000',strokeOpacity:0.7,strokeWeight:1,fillColor:'#FF0000',fillOpacity:0.3});redZone2=new google.maps.Polygon({paths:redZonePath2,strokeColor:'#FF0000',strokeOpacity:0.7,strokeWeight:1,fillColor:'#FF0000',fillOpacity:0.3});redZone3=new google.maps.Polygon({paths:redZonePath3,strokeColor:'#FF0000',strokeOpacity:0.7,strokeWeight:1,fillColor:'#FF0000',fillOpacity:0.3});}yellowZone=new google.maps.Polygon({paths:yellowZonePath,strokeColor:'#ffcc00',strokeOpacity:0.7,strokeWeight:1,fillColor:'#ffcc00',fillOpacity:0.5});yellowZone2=new google.maps.Polygon({paths:yellowZonePath2,strokeColor:'#ffcc00',strokeOpacity:0.7,strokeWeight:1,fillColor:'#ffcc00',fillOpacity:0.5});greenZone=new google.maps.Polygon({paths:greenZonePath,strokeColor:'#00a300',strokeOpacity:0.7,strokeWeight:1,fillColor:'#00b700',fillOpacity:0.3});greenZone2=new google.maps.Polygon({paths:greenZonePath2,strokeColor:'#00a300',strokeOpacity:0.7,strokeWeight:1,fillColor:'#00b700',fillOpacity:0.3});let southWestLatLng=new google.maps.LatLng({lat:49.7656834,lng:23.8685913}),northEastLatLng=new google.maps.LatLng({lat:49.906071,lng:24.166724}),lvivAutocompleteBounds=new google.maps.LatLngBounds(southWestLatLng,northEastLatLng);let options={types:['address'],componentRestrictions:{country:"ua"},bounds:lvivAutocompleteBounds,strictBounds:true};if(typeof AllStreets!=='undefined'){var cities=Object.keys(AllStreets);var streets=[];for(var i=0;i<cities.length;i++){var city=cities[i];for(var j=0;j<AllStreets[city].length;j++){var streetName=AllStreets[city][j].name;streets.push(streetName+', '+city);}}jQautocomplete(streets);}else if($('#streetAutocomplete').length){let autocomplete=new google.maps.places.Autocomplete((document.getElementById('streetAutocomplete')),options);google.maps.event.addListener(autocomplete,'place_changed',function(){$('#houseNumber').val('');for(let i=0;i<markers.length;i++){markers[i].setMap(null);}});}if($('#deliveryStreet').length){let deliveryStreet=new google.maps.places.Autocomplete((document.getElementById('deliveryStreet')),options);google.maps.event.addListener(deliveryStreet,'place_changed',function(){let place=deliveryStreet.getPlace(),newLocation;if(!place.geometry.location)return false;if(markers.length){for(let i=0;i<markers.length;i++){markers[i].setMap(null);}map.panTo(myLatlng);}newLocation=new google.maps.LatLng(place.geometry.location.lat(),place.geometry.location.lng());smoothZoomMap(map,15);addMarker(newLocation);});}map=new google.maps.Map(document.getElementById("map"),mapOptions);map.mapTypes.set('map_style',styledMap);map.setMapTypeId('map_style');if(red_zone_1=='1'){redZone.setMap(map);redZone2.setMap(map);redZone3.setMap(map);}yellowZone.setMap(map);yellowZone2.setMap(map);greenZone.setMap(map);greenZone2.setMap(map);$('.marker').each(function(i,el){addStaticMarker(new google.maps.LatLng($(this).attr('data-lat'),$(this).attr('data-lng')),map,$(this).attr('data-string'),$(this).attr('data-image'),$(this).attr('data-number'))});map.addListener('click',function(){ib.close();});var selectCityCheck=false;$("#streetAutocomplete").focus(function(){selectCityCheck=false;$("#streetAutocomplete").val('');$('#houseNumber').val('');});$("#streetAutocomplete").blur(function(){if(selectCityCheck===false){$("#streetAutocomplete").val('');}});function jQautocomplete(arr){$('#streetAutocomplete').autocomplete({response:function(event,ui){if(ui.content.length==0){noDataBase=true;}else{noDataBase=false;}},source:function(request,response){var results=$.ui.autocomplete.filter(arr,request.term);response(results.slice(0,10));},select:function(event,ui){selectCityCheck=true;}});}$(document).on('click','.js-clear-address-fields',function(){$('input[name="type_address"]').val('');$('input[name="street"]').val('');$('input[name="number-building"]').val('');$('input[name="number-apartment"]').val('');for(let i=0;i<markers.length;i++){markers[i].setMap(null);}});}function check_delivery_method(){if($('input[name=delivery_method]:checked').val()=='local_pickup'){var currentPrice=$('.all-product-price-el').attr('data-total');$('.deliveryWarning .errorMsg.noPriceGreen').slideUp(350);$('.deliveryWarning .errorMsg.noPriceYellow').slideUp(350);$('.deliveryWarning .errorMsg.noPriceRed').slideUp(350);$('.deliveryWarning .errorMsg.noZone').slideUp(350);$('.inputs-wrap').slideUp(350);if(currentPrice<300){$('.deliveryWarning .errorMsg.noPriceRoll').slideDown(350);}else{$('.deliveryWarning .errorMsg.noPriceRoll').slideUp(350);}for(let i=0;i<markers.length;i++){markers[i].setMap(null);}$('#streetAutocomplete').val('');$("#houseNumber").val('');resetMap();}else{$('.inputs-wrap').slideDown(350);}}check_delivery_method();function checkDeliveryZone(newLocation,currentPrice,redZonePrice,yellowZonePrice,greenZonePrice,outZonePrice){var terminal_field_length=$('[name=terminal_id]').length;var terminal_id='';var address_payment_methods=[];var all_payment_methods=$('.payment-entry-wrap').length;var red_zone_1=$('#zone_red_check').data('red_zone1');if(red_zone_1==1){if(google.maps.geometry.poly.containsLocation(newLocation,redZone)===true||google.maps.geometry.poly.containsLocation(newLocation,redZone2)===true||google.maps.geometry.poly.containsLocation(newLocation,redZone3)===true){$('#map').attr('data-current-zone',$('#map').data('red-zone'));if(google.maps.geometry.poly.containsLocation(newLocation,redZone)===true){$('#map').attr('data-current-zone-type','red');terminal_id='427d6dd2-1d65-275f-014c-ec534e53008e';address_payment_methods=address_payment.payments.vh;}else if(google.maps.geometry.poly.containsLocation(newLocation,redZone2)===true){$('#map').attr('data-current-zone-type','red-2');terminal_id='9ab1444c-8690-48ba-abf1-fe70cb0eeeb4';address_payment_methods=address_payment.payments.vv;}else if(google.maps.geometry.poly.containsLocation(newLocation,redZone3)===true){$('#map').attr('data-current-zone-type','red-3');terminal_id='9ab1444c-8690-48ba-abf1-fe70cb0eeeb4';address_payment_methods=address_payment.payments.vv;}if(terminal_field_length){$('[name=terminal_id]').val(terminal_id);}$('[name="payment_method"]').each(function(){if(address_payment_methods.includes($(this).attr('data-rel'))){$(this).closest('.payment-entry-wrap').removeClass('hidden');}else{$(this).closest('.payment-entry-wrap').addClass('hidden');}});if($('.payment-entry-wrap.hidden [name="payment_method"]:checked').length&&all_payment_methods!=$('.payment-entry-wrap.hidden').length){var change_active=false;$('.payment-entry-wrap [name="payment_method"]').each(function(){if($(this).closest('.payment-entry-wrap').hasClass('hidden')||change_active){$(this).removeAttr('checked');}else{$(this).attr('checked',true);change_active=true;}});$('#text-popup').find('.text').html(address_payment.message.change);_functions.openPopup('#text-popup');}if(all_payment_methods==$('.payment-entry-wrap.hidden').length){$('#text-popup').find('.text').html(address_payment.message.empty);_functions.openPopup('#text-popup');}$('#map').attr('data-current-nomin-delivery-price',0);$('.deliveryWarning .errorMsg.lowOrder b, .js-zone-min-price').html($('#map').data('red-zone'));$('#map').attr('data-current-delivery-price',$('#map').data('red-zone-nomin-delivery-price'));$('#map').attr('data-current-time-delivery',$('#map').data('time-red-delivery'));$('.deliveryWarning .errorMsg.noPriceOut').slideUp(350);if($('.all-product-price').length&&currentPrice>=redZonePrice){step3=true;step3Func(step3);$('.deliveryWarning .errorMsg.noPriceRed').slideUp(350);}else{$('#map').attr('data-current-nomin-delivery-price',$('#map').data('red-zone-nomin-delivery-price'));step3=false;step3Func(step3);if($('input[name=delivery_method]:checked').val()!='local_pickup'){$('.deliveryWarning .errorMsg.noPriceRed').slideDown(350);$('.main-order-button').addClass('disabled');$('.deliveryWarning .errorMsg.noPriceYellow').slideUp(350);$('.deliveryWarning .errorMsg.noPriceGreen').slideUp(350);$('.deliveryWarning .errorMsg.noZone').slideUp(350);$('.deliveryWarning .errorMsg.noPriceRoll').slideUp(350);}}$('input#payment_method_liqpay').parents('.checkbox-entry-wrap').show();$('.green-delivery').slideUp(350);$('.no-delivery').slideUp(350);$('.yellow-delivery').slideUp(350);$('.red-delivery').slideDown(350);$('.deliveryWarning .errorMsg.noZone').slideUp(350);$('#payment_method_liqpay').closest('.checkbox-entry-wrap').show();}else
if(google.maps.geometry.poly.containsLocation(newLocation,yellowZone)===true||google.maps.geometry.poly.containsLocation(newLocation,yellowZone2)===true){$('#map').attr('data-current-zone',$('#map').data('yellow-zone'));if(google.maps.geometry.poly.containsLocation(newLocation,yellowZone2)===true){$('#map').attr('data-current-zone-type','yellow-2');terminal_id='9ab1444c-8690-48ba-abf1-fe70cb0eeeb4';address_payment_methods=address_payment.payments.vv;}else{$('#map').attr('data-current-zone-type','yellow');terminal_id='427d6dd2-1d65-275f-014c-ec534e53008e';address_payment_methods=address_payment.payments.vh;}if(terminal_field_length){$('[name=terminal_id]').val(terminal_id);}$('[name="payment_method"]').each(function(){if(address_payment_methods.includes($(this).attr('data-rel'))){$(this).closest('.payment-entry-wrap').removeClass('hidden');}else{$(this).closest('.payment-entry-wrap').addClass('hidden');}});if($('.payment-entry-wrap.hidden [name="payment_method"]:checked').length&&all_payment_methods!=$('.payment-entry-wrap.hidden').length){var change_active=false;$('.payment-entry-wrap [name="payment_method"]').each(function(){if($(this).closest('.payment-entry-wrap').hasClass('hidden')||change_active){$(this).removeAttr('checked');}else{$(this).attr('checked',true);change_active=true;}});$('#text-popup').find('.text').html(address_payment.message.change);_functions.openPopup('#text-popup');}if(all_payment_methods==$('.payment-entry-wrap.hidden').length){$('#text-popup').find('.text').html(address_payment.message.empty);_functions.openPopup('#text-popup');}$('#map').attr('data-current-nomin-delivery-price',0);$('.deliveryWarning .errorMsg.lowOrder b, .js-zone-min-price').html($('#map').data('yellow-zone'));$('#map').attr('data-current-delivery-price',$('#map').data('yellow-zone-nomin-delivery-price'));$('#map').attr('data-current-time-delivery',$('#map').data('time-yellow-delivery'));$('.deliveryWarning .errorMsg.noPriceOut').slideUp(350);if($('.all-product-price').length&&currentPrice>=yellowZonePrice){step3=true;step3Func(step3);$('.deliveryWarning .errorMsg.noPriceYellow').slideUp(350);}else{$('#map').attr('data-current-nomin-delivery-price',$('#map').data('yellow-zone-nomin-delivery-price'));step3=false;step3Func(step3);if($('input[name=delivery_method]:checked').val()!='local_pickup'){$('.deliveryWarning .errorMsg.noPriceYellow').slideDown(350);$('.main-order-button').addClass('disabled');$('.deliveryWarning .errorMsg.noPriceGreen').slideUp(350);$('.deliveryWarning .errorMsg.noZone').slideUp(350);$('.deliveryWarning .errorMsg.noPriceRoll').slideUp(350);$('.deliveryWarning .errorMsg.noPriceRed').slideUp(350);}}$('input#payment_method_liqpay').parents('.checkbox-entry-wrap').show();$('.green-delivery').slideUp(350);$('.no-delivery').slideUp(350);$('.yellow-delivery').slideDown(350);$('.deliveryWarning .errorMsg.noZone').slideUp(350);$('#payment_method_liqpay').closest('.checkbox-entry-wrap').show();}else if(google.maps.geometry.poly.containsLocation(newLocation,greenZone)===true||google.maps.geometry.poly.containsLocation(newLocation,greenZone2)===true){$('#map').attr('data-current-zone',$('#map').data('green-zone'));if(google.maps.geometry.poly.containsLocation(newLocation,greenZone2)===true){$('#map').attr('data-current-zone-type','green-2');terminal_id='9ab1444c-8690-48ba-abf1-fe70cb0eeeb4';address_payment_methods=address_payment.payments.vv;}else{$('#map').attr('data-current-zone-type','green');terminal_id='427d6dd2-1d65-275f-014c-ec534e53008e';address_payment_methods=address_payment.payments.vh;}if(terminal_field_length){$('[name=terminal_id]').val(terminal_id);}$('[name="payment_method"]').each(function(){if(address_payment_methods.includes($(this).attr('data-rel'))){$(this).closest('.payment-entry-wrap').removeClass('hidden');}else{$(this).closest('.payment-entry-wrap').addClass('hidden');}});if($('.payment-entry-wrap.hidden [name="payment_method"]:checked').length&&all_payment_methods!=$('.payment-entry-wrap.hidden').length){var change_active=false;$('.payment-entry-wrap [name="payment_method"]').each(function(){if($(this).closest('.payment-entry-wrap').hasClass('hidden')||change_active){$(this).removeAttr('checked');}else{$(this).attr('checked',true);change_active=true;}});$('#text-popup').find('.text').html(address_payment.message.change);_functions.openPopup('#text-popup');}if(all_payment_methods==$('.payment-entry-wrap.hidden').length){$('#text-popup').find('.text').html(address_payment.message.empty);_functions.openPopup('#text-popup');}$('#map').attr('data-current-nomin-delivery-price',0);$('.deliveryWarning .errorMsg.lowOrder b, .js-zone-min-price').html($('#map').data('green-zone'));$('#map').attr('data-current-delivery-price',$('#map').data('green-zone-nomin-delivery-price'));$('#map').attr('data-current-time-delivery',$('#map').data('time-green-delivery'));$('.deliveryWarning .errorMsg.noPriceOut').slideUp(350);if($('.all-product-price').length&&currentPrice>=greenZonePrice){step3=true;step3Func(step3);$('.deliveryWarning .errorMsg.noPriceGreen').slideUp(350);}else{$('#map').attr('data-current-nomin-delivery-price',$('#map').data('green-zone-nomin-delivery-price'));step3=false;step3Func(step3);if($('input[name=delivery_method]:checked').val()!='local_pickup'){$('.deliveryWarning .errorMsg.noPriceGreen').slideDown(350);$('.main-order-button').addClass('disabled');$('.deliveryWarning .errorMsg.noPriceYellow').slideUp(350);$('.deliveryWarning .errorMsg.noZone').slideUp(350);$('.deliveryWarning .errorMsg.noPriceRoll').slideUp(350);$('.deliveryWarning .errorMsg.noPriceRed').slideUp(350);}}$('.deliveryWarning .errorMsg.noZone').slideUp(350);$('input#payment_method_liqpay').parents('.checkbox-entry-wrap').show();$('.yellow-delivery').slideUp(350);$('.no-delivery').slideUp(350);$('.green-delivery').slideDown(350);$('#payment_method_liqpay').closest('.checkbox-entry-wrap').show();}else{$('.yellow-delivery').slideUp(350);$('.green-delivery').slideUp(350);$('.no-delivery').slideDown(350);$('#map').attr('data-current-zone',$('#map').data('out-zone'));$('#map').attr('data-current-nomin-delivery-price',0);$('#map').attr('data-current-zone-type','outside');$('#map').attr('data-current-delivery-price',$('#map').data('out-zone-price'));$('#map').attr('data-current-time-delivery',$('#map').data('time-out-delivery'));smoothZoomMap(map,11);if($('.all-product-price').length&&currentPrice>=outZonePrice){step3=true;step3Func(step3);$('.deliveryWarning .errorMsg.noPriceOut').slideUp(350);}else{$('#map').attr('data-current-nomin-delivery-price',$('#map').data('out-zone-min-price'));step3=false;step3Func(step3);if($('input[name=delivery_method]:checked').val()!='local_pickup'){$('.deliveryWarning .errorMsg.noPriceOut').slideDown(350);$('.deliveryWarning .errorMsg.noPriceYellow').slideUp(350);$('.deliveryWarning .errorMsg.noPriceRed').slideUp(350);$('.deliveryWarning .errorMsg.noPriceGreen').slideUp(350);$('.main-order-button').addClass('disabled');}}$('#payment_method_liqpay').prop('checked',false);$('#payment_method_liqpay').closest('.checkbox-entry-wrap').hide();$('#payment_method_cod').prop('checked',true);}}else{if(google.maps.geometry.poly.containsLocation(newLocation,yellowZone)===true||google.maps.geometry.poly.containsLocation(newLocation,yellowZone2)===true){$('#map').attr('data-current-zone',$('#map').data('yellow-zone'));if(google.maps.geometry.poly.containsLocation(newLocation,yellowZone2)===true){$('#map').attr('data-current-zone-type','yellow-2');terminal_id='9ab1444c-8690-48ba-abf1-fe70cb0eeeb4';address_payment_methods=address_payment.payments.vv;}else{$('#map').attr('data-current-zone-type','yellow');terminal_id='427d6dd2-1d65-275f-014c-ec534e53008e';address_payment_methods=address_payment.payments.vh;}if(terminal_field_length){$('[name=terminal_id]').val(terminal_id);}$('[name="payment_method"]').each(function(){if(address_payment_methods.includes($(this).attr('data-rel'))){$(this).closest('.payment-entry-wrap').removeClass('hidden');}else{$(this).closest('.payment-entry-wrap').addClass('hidden');}});if($('.payment-entry-wrap.hidden [name="payment_method"]:checked').length&&all_payment_methods!=$('.payment-entry-wrap.hidden').length){var change_active=false;$('.payment-entry-wrap [name="payment_method"]').each(function(){if($(this).closest('.payment-entry-wrap').hasClass('hidden')||change_active){$(this).removeAttr('checked');}else{$(this).attr('checked',true);change_active=true;}});$('#text-popup').find('.text').html(address_payment.message.change);_functions.openPopup('#text-popup');}if(all_payment_methods==$('.payment-entry-wrap.hidden').length){$('#text-popup').find('.text').html(address_payment.message.empty);_functions.openPopup('#text-popup');}$('#map').attr('data-current-nomin-delivery-price',0);$('.deliveryWarning .errorMsg.lowOrder b, .js-zone-min-price').html($('#map').data('yellow-zone'));$('#map').attr('data-current-delivery-price',$('#map').data('yellow-zone-nomin-delivery-price'));$('#map').attr('data-current-time-delivery',$('#map').data('time-yellow-delivery'));$('.deliveryWarning .errorMsg.noPriceOut').slideUp(350);if($('.all-product-price').length&&currentPrice>=yellowZonePrice){step3=true;step3Func(step3);$('.deliveryWarning .errorMsg.noPriceYellow').slideUp(350);}else{$('#map').attr('data-current-nomin-delivery-price',$('#map').data('yellow-zone-nomin-delivery-price'));step3=false;step3Func(step3);if($('input[name=delivery_method]:checked').val()!='local_pickup'){$('.deliveryWarning .errorMsg.noPriceYellow').slideDown(350);$('.main-order-button').addClass('disabled');$('.deliveryWarning .errorMsg.noPriceGreen').slideUp(350);$('.deliveryWarning .errorMsg.noZone').slideUp(350);$('.deliveryWarning .errorMsg.noPriceRoll').slideUp(350);$('.deliveryWarning .errorMsg.noPriceRed').slideUp(350);}}$('input#payment_method_liqpay').parents('.checkbox-entry-wrap').show();$('.green-delivery').slideUp(350);$('.no-delivery').slideUp(350);$('.yellow-delivery').slideDown(350);$('.deliveryWarning .errorMsg.noZone').slideUp(350);$('#payment_method_liqpay').closest('.checkbox-entry-wrap').show();}else if(google.maps.geometry.poly.containsLocation(newLocation,greenZone)===true||google.maps.geometry.poly.containsLocation(newLocation,greenZone2)===true){$('#map').attr('data-current-zone',$('#map').data('green-zone'));if(google.maps.geometry.poly.containsLocation(newLocation,greenZone2)===true){$('#map').attr('data-current-zone-type','green-2');terminal_id='9ab1444c-8690-48ba-abf1-fe70cb0eeeb4';address_payment_methods=address_payment.payments.vv;}else{$('#map').attr('data-current-zone-type','green');terminal_id='427d6dd2-1d65-275f-014c-ec534e53008e';address_payment_methods=address_payment.payments.vh;}if(terminal_field_length){$('[name=terminal_id]').val(terminal_id);}$('[name="payment_method"]').each(function(){if(address_payment_methods.includes($(this).attr('data-rel'))){$(this).closest('.payment-entry-wrap').removeClass('hidden');}else{$(this).closest('.payment-entry-wrap').addClass('hidden');}});if($('.payment-entry-wrap.hidden [name="payment_method"]:checked').length&&all_payment_methods!=$('.payment-entry-wrap.hidden').length){var change_active=false;$('.payment-entry-wrap [name="payment_method"]').each(function(){if($(this).closest('.payment-entry-wrap').hasClass('hidden')||change_active){$(this).removeAttr('checked');}else{$(this).attr('checked',true);change_active=true;}});$('#text-popup').find('.text').html(address_payment.message.change);_functions.openPopup('#text-popup');}if(all_payment_methods==$('.payment-entry-wrap.hidden').length){$('#text-popup').find('.text').html(address_payment.message.empty);_functions.openPopup('#text-popup');}$('#map').attr('data-current-nomin-delivery-price',0);$('.deliveryWarning .errorMsg.lowOrder b, .js-zone-min-price').html($('#map').data('green-zone'));$('#map').attr('data-current-delivery-price',$('#map').data('green-zone-nomin-delivery-price'));$('#map').attr('data-current-time-delivery',$('#map').data('time-green-delivery'));$('.deliveryWarning .errorMsg.noPriceOut').slideUp(350);if($('.all-product-price').length&&currentPrice>=greenZonePrice){step3=true;step3Func(step3);$('.deliveryWarning .errorMsg.noPriceGreen').slideUp(350);}else{$('#map').attr('data-current-nomin-delivery-price',$('#map').data('green-zone-nomin-delivery-price'));step3=false;step3Func(step3);if($('input[name=delivery_method]:checked').val()!='local_pickup'){$('.deliveryWarning .errorMsg.noPriceGreen').slideDown(350);$('.main-order-button').addClass('disabled');$('.deliveryWarning .errorMsg.noPriceYellow').slideUp(350);$('.deliveryWarning .errorMsg.noZone').slideUp(350);$('.deliveryWarning .errorMsg.noPriceRoll').slideUp(350);$('.deliveryWarning .errorMsg.noPriceRed').slideUp(350);}}$('.deliveryWarning .errorMsg.noZone').slideUp(350);$('input#payment_method_liqpay').parents('.checkbox-entry-wrap').show();$('.yellow-delivery').slideUp(350);$('.no-delivery').slideUp(350);$('.green-delivery').slideDown(350);$('#payment_method_liqpay').closest('.checkbox-entry-wrap').show();}else{$('.yellow-delivery').slideUp(350);$('.green-delivery').slideUp(350);$('.no-delivery').slideDown(350);$('#map').attr('data-current-zone',$('#map').data('out-zone'));$('#map').attr('data-current-nomin-delivery-price',0);$('#map').attr('data-current-zone-type','outside');$('#map').attr('data-current-delivery-price',$('#map').data('out-zone-price'));$('#map').attr('data-current-time-delivery',$('#map').data('time-out-delivery'));smoothZoomMap(map,11);if($('.all-product-price').length&&currentPrice>=outZonePrice){step3=true;step3Func(step3);$('.deliveryWarning .errorMsg.noPriceOut').slideUp(350);}else{$('#map').attr('data-current-nomin-delivery-price',$('#map').data('out-zone-min-price'));step3=false;step3Func(step3);if($('input[name=delivery_method]:checked').val()!='local_pickup'){$('.deliveryWarning .errorMsg.noPriceOut').slideDown(350);$('.deliveryWarning .errorMsg.noPriceYellow').slideUp(350);$('.deliveryWarning .errorMsg.noPriceRed').slideUp(350);$('.deliveryWarning .errorMsg.noPriceGreen').slideUp(350);$('.main-order-button').addClass('disabled');}}$('#payment_method_liqpay').prop('checked',false);$('#payment_method_liqpay').closest('.checkbox-entry-wrap').hide();$('#payment_method_cod').prop('checked',true);}}}function address(latlng){let newLocation=latlng,currentPrice=+$('.all-product-price-el-all').text(),redZonePrice=+$('#map').data('red-zone'),yellowZonePrice=+$('#map').data('yellow-zone'),greenZonePrice=+$('#map').data('green-zone'),outZonePrice=+$('#map').data('out-zone-min-price');if($('.things').length){const thingsPrice=+$('#things-count').val()*+$('.things').attr('data-price');currentPrice+=thingsPrice;}if(step1&&step2){for(let i=0;i<markers.length;i++){markers[i].setMap(null);}smoothZoomMap(map,15);addMarker(newLocation);checkDeliveryZone(newLocation,currentPrice,redZonePrice,yellowZonePrice,greenZonePrice,outZonePrice);}}GeoLocation.googleMapCoordinates=function(){if($('#selfDelivery').is(':checked')){return;}var streetss=$('#streetAutocomplete').val();let arr_city=streetss.split(', ');var street=arr_city[0];var select_city=arr_city[1];if(street=='вулиця Тараса Шевченка'&&select_city=='Львів'){street='вулиця Шевченка';}if(street=='вулиця Володимира Антоновича'&&select_city=='Львів'){street='вулиця Антоновича';}if(street=='вулиця Михайла Коцюбинського'&&select_city=='Львів'){street='вулиця Коцюбинського';}if(street=='вулиця Капітана Михайла Білинського'&&select_city=='Львів'){street='вулиця Білинського';}if(street=='вулиця Генерала Мирона Тарнавського'&&select_city=='Львів'){street='вулиця Тарнавського';}if(street=='вулиця Бориса Грінченка'&&select_city=='Львів'){street='вулиця Грінченка';}if(street=='вулиця Микити Годованця'&&select_city=='Львів'){street='вулиця Годованця';}if(street=='вулиця Васілія Жуковського'&&select_city=='Львів'){street='вулиця Жуковського';}if(street=='вулиця Олександра Архипенка'&&select_city=='Львів'){street='вулиця Архипенка';}if(street=='вулиця Гетьмана Павла Полуботка'&&select_city=='Львів'){street='вулиця Полуботка';}if(street=='вулиця Академіка Сергія Єфремова'&&select_city=='Львів'){street='вулиця Єфремова';}if(street=='вулиця Дмитра Яворницького'&&select_city=='Львів'){street='вулиця Яворницького';}if(street=='вулиця Марії Мундяк'&&select_city=='Львів'){street='вулиця Мундяк';}if(street=='вулиця Олександра Олеся'&&select_city=='Львів'){street='вулиця Олеся';}if(street=='вулиця Академіка Івана Павлова'&&select_city=='Львів'){street='вулиця Павлова';}if(street=='вулиця Генерала Мирона Тарнавського'&&select_city=='Львів'){street='вулиця Тарнавського';}if(street=='вулиця Генерала Мирона Тарнавського'&&select_city=='Львів'){street='вулиця Тарнавського';}if(street=='вулиця Сергія Корольова'&&select_city=='Львів'){street='вулиця Корольова';}if(street=='вулиця Сергія Корольова'&&select_city=='Львів'){street='вулиця Корольова';}if(street=='вулиця Петра Дорошенка'&&select_city=='Львів'){street='вулиця Дорошенка';}if(street=='вулиця Наталії Кобринської'&&select_city=='Львів'){street='вулиця Кобринської';}if(street=='вулиця Олега Ольжича'&&select_city=='Львів'){street='вулиця Ольжича';}if(street=='вулиця Юрія Федьковича'&&select_city=='Львів'){street='вулиця Федьковича';}if(street=='вулиця Ольги Кобилянської'&&select_city=='Львів'){street='вулиця Кобилянської';}if(street=='вулиця Юліана Захарієвича'&&select_city=='Львів'){street='вулиця Захарієвича';}if(street=='вулиця Миколи Лукаша'&&select_city=='Львів'){street='вулиця Лукаша';}if(street=='вулиця Степана Васильченка'&&select_city=='Львів'){street='вулиця Васильченка';}if(street=='вулиця Ярослава Ярославенка'&&select_city=='Львів'){street='вулиця Ярославенка';}if(street=='вулиця Івана Котляревського'&&select_city=='Львів'){street='вулиця Котляревського';}let streetAddress=select_city+' '+street+' '+$('#houseNumber').val();let geocoder=new google.maps.Geocoder();console.log(streetAddress);geocoder.geocode({"address":streetAddress},function(results,status){console.log(results,status);if(status==google.maps.GeocoderStatus.OK){if(streetAddress.indexOf('вулиця Мундяк')!=-1&&$('#houseNumber').val()==4){var latlng=new google.maps.LatLng(49.848227,23.967575);}else if(streetAddress.indexOf('вулиця Олеся')!=-1&&$('#houseNumber').val().replace(/ /g,'')=='25д'){var latlng=new google.maps.LatLng(49.826211,24.055627);}else if(streetAddress.indexOf('вулиця Малоголосківська')!=-1&&$('#houseNumber').val()==19){var latlng=new google.maps.LatLng(49.866081,23.998873);}else if(streetAddress.indexOf('вулиця Кобринської')!=-1&&$('#houseNumber').val()==10){var latlng=new google.maps.LatLng(49.818509,23.994270);}else{var latlng=new google.maps.LatLng(results[0].geometry.location.lat(),results[0].geometry.location.lng());}$('.deliveryWarning .errorMsg.noData').slideUp(350);$('#pay2 input').closest('.radiobox-item').find('span').css({'opacity':'1'});$('#pay2 input').attr('disabled',false);step2=true;step2Func(step2);address(latlng);}else{step2=false;step2Func(step2);}});};function step1Func(stepBoolean){if(stepBoolean){$('#streetAutocomplete, #houseNumber').removeClass('invalid');$('.deliveryWarning .errorMsg.empty-address').slideUp(350);}else{$('#streetAutocomplete, #houseNumber').addClass('invalid');$('.deliveryWarning .errorMsg.empty-house').slideUp(350);$('.deliveryWarning .errorMsg.lowOrder').slideUp(350);$('.deliveryWarning .errorMsg.lowOrderDelivery').slideUp(350);$('.cart-wrapper .minimum-order').slideUp(350);$('.deliveryWarning .errorMsg.noDelivery').slideUp(350);$('.deliveryWarning .errorMsg.empty-address').slideDown(350);$('.checkout-map #not-delivery').slideUp(350);$('.price-wrapp .price-delivery').slideUp(0);resetMap();}}function step2Func(stepBoolean){if(stepBoolean){$('#mapStreet').removeClass('invalid');$('.deliveryWarning .errorMsg.empty-house').slideUp(350);$('.main-order-button').removeClass('disabled');$('.save-address').removeClass('disabled');$('.deliveryWarning .errorMsg.outsideOfZones').slideUp(350);smoothZoomMap(map,15);}else{$('#mapStreet').addClass('invalid');$('.deliveryWarning .errorMsg.empty-address').slideUp(350);$('.deliveryWarning .errorMsg.lowOrder').slideUp(350);$('.deliveryWarning .errorMsg.lowOrderDelivery').slideUp(350);$('.cart-wrapper .minimum-order').slideUp(350);$('.deliveryWarning .errorMsg.noDelivery').slideUp(350);$('.deliveryWarning .errorMsg.empty-house').slideDown(350);$('.checkout-map #not-delivery').slideUp(350);$('.price-wrapp .price-delivery').slideUp(0);$('.save-address').addClass('disabled');}}function step3Func(stepBoolean){var deliveryPrice=$('#map').attr('data-current-delivery-price');if(deliveryPrice!=0){$('.price-wrapp .price-delivery').slideDown(350);$('#all-products-delivery').text($('#map').attr('data-current-delivery-price'));}else{$('.price-wrapp .price-delivery').slideUp(0);}if(stepBoolean){$('#mapStreet').removeClass('invalid');$('.main-order-button').removeClass('disabled');$('.deliveryWarning .errorMsg.empty-address').slideUp(350);$('.deliveryWarning .errorMsg.empty-house').slideUp(350);$('.deliveryWarning .errorMsg.noDelivery').slideUp(350);$('.deliveryWarning .errorMsg.lowOrder').slideUp(350);$('.deliveryWarning .errorMsg.lowOrderDelivery').slideUp(350);$('.cart-wrapper .minimum-order').slideUp(350);$('.checkout-map #not-delivery').slideUp(350);$('.save-address').addClass('disabled');smoothZoomMap(map,15);}else{if(+$('#map').attr('data-current-nomin-delivery-price')>0){$('#mapStreet').removeClass('invalid');$('.main-order-button').removeClass('disabled');$('.deliveryWarning .errorMsg.empty-address').slideUp(350);$('.deliveryWarning .errorMsg.empty-house').slideUp(350);$('.deliveryWarning .errorMsg.noDelivery').slideUp(350);$('.deliveryWarning .errorMsg.lowOrder').slideUp(350);$('.cart-wrapper .minimum-order').slideUp(350);$('.checkout-map #not-delivery').slideUp(350);$('.deliveryWarning .errorMsg.lowOrderDelivery').slideDown(350);}else{$('#mapStreet').addClass('invalid');$('.deliveryWarning .errorMsg.empty-address').slideUp(350);$('.deliveryWarning .errorMsg.empty-house').slideUp(350);$('.deliveryWarning .errorMsg.noDelivery').slideUp(350);$('.deliveryWarning .errorMsg.lowOrderDelivery').slideUp(350);$('.cart-wrapper .minimum-order').slideDown(350);$('.checkout-map #not-delivery').slideUp(350);$('.save-address').removeClass('disabled');}smoothZoomMap(map,11);}}function resetMap(){if(markers.length){for(let i=0;i<markers.length;i++){markers[i].setMap(null);}map.panTo(myLatlng);smoothZoomMap(map,12);}}function smoothZoomMap(map,targetZoom){let currentZoom=arguments[2]||map.getZoom();if(currentZoom!=targetZoom){google.maps.event.addListenerOnce(map,'zoom_changed',function(event){smoothZoomMap(map,targetZoom,currentZoom+(targetZoom>currentZoom?1:-1));});setTimeout(function(){map.setZoom(currentZoom)},100);}}_functions.startSteps=function(){if($('#streetAutocomplete').val()&&$('#houseNumber').val()){if($('#streetAutocomplete').val()){$('#streetAutocomplete').removeClass('invalid');}if($('#houseNumber').val()){$('#houseNumber').removeClass('invalid');}step1=true;GeoLocation.googleMapCoordinates();}else{step1=false;}}
function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)func.apply(context,args);};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)func.apply(context,args);};}$("#streetAutocomplete").focus(function(){_functions.startSteps();});$("#streetAutocomplete").on('blur',function(){if($('[name="delivery_method"]').val()=='courier'){if($(this).val().trim()===''){$('.main-order-button').addClass('disabled');$('.errorMsg.empty-address').slideDown(350);}}});$('#houseNumber').keyup(debounce(function(){if($('#streetAutocomplete').val().trim()!==''){_functions.startSteps();}},200));$("#houseNumber").on('blur',function(){if($(this).val().trim()===''){$('.main-order-button').addClass('disabled');}});$("#streetAutocomplete, #houseNumber").focus(function(e){if(e.which!=13&&$("#houseNumber").length)return false;_functions.startSteps();});$('#StartSearch').on('click',function(){if($('#streetAutocomplete').val()&&$('#houseNumber').val()){if($('#streetAutocomplete').val()){$('#streetAutocomplete').removeClass('invalid');}if($('#houseNumber').val()){$('#houseNumber').removeClass('invalid');}step1=true;step1Func(step1);GeoLocation.googleMapCoordinates();}else{step1=false;step1Func(step1);}});var count=0;$('input[name=delivery_method]').on('change',function(e){$('input[name=self_delivery_date]').val('');if($(this).val()!=='courier'){var currentPrice=$('.all-product-price-el').attr('data-total');$('.main-order-button').removeClass('disabled');$('.deliveryWarning .errorMsg.noDelivery').slideUp(350);$('.checkout-map #not-delivery').slideUp(350);$('.price-wrapp .price-delivery').slideUp(0);$('.deliveryWarning .errorMsg.lowOrderDelivery').slideUp(350);if($(this).val()==='local_pickup'){$('.price-wrapp .price-discount').slideDown(0);}else{$('.price-wrapp .price-discount').slideUp(0);}$('.deliveryWarning .errorMsg.noPriceGreen').slideUp(350);$('.deliveryWarning .errorMsg.noPriceYellow').slideUp(350);$('.deliveryWarning .errorMsg.noPriceRed').slideUp(350);$('.deliveryWarning .errorMsg.noZone').slideUp(350);if(currentPrice<300){$('.deliveryWarning .errorMsg.noPriceRoll').slideDown(350);}else{$('.deliveryWarning .errorMsg.noPriceRoll').slideUp(350);}$('.inputs-wrap').slideUp(350);$('#streetAutocomplete').val('');$("#houseNumber").val('');resetMap();$('.sumoselect-point').slideDown(350);$('#select_point').on('change',function(){count=count+1;var terminal_field_length=$('[name=terminal_id]').length;var terminal_id='';let newPosition=$(this).val();let infoValue=$(this).next().attr('title');$('.local-delivery').slideDown(350);$('.map-delivery.local-delivery span').text(infoValue);if(newPosition=='1'){terminal_id='427d6dd2-1d65-275f-014c-ec534e53008e';}else{terminal_id='9ab1444c-8690-48ba-abf1-fe70cb0eeeb4';}if(terminal_field_length){$('[name=terminal_id]').val(terminal_id);}for(let i=0;i<staticMarkers.length;i++){if(staticMarkers[i].number==newPosition){map.setZoom(14);map.setCenter(staticMarkers[i].getPosition());}}});if(count>0){$('#select_point').change();}}else{if($('#streetAutocomplete').val()&&$('#houseNumber').val()){_functions.startSteps();}$('.price-wrapp .price-discount').slideUp(0);$('.deliveryWarning .errorMsg.noPriceRoll').slideUp(350);$('.inputs-wrap').slideDown(350);$('.local-delivery').slideUp(350);$('.sumoselect-point').slideUp(350);$('.main-order-button').addClass('disabled');map.panTo(myLatlng);map.setZoom(12);}});$(document).on('click','.js-edit-address',function(e){let $this=$(this),$adressItem=$this.closest('.js-address-item'),name_address=$adressItem.find('.js-address-name').text(),street=$adressItem.find('.js-street').text(),number_building=$adressItem.find('.js-house').text(),number_apartment=$adressItem.find('.js-apartment').text(),index_edit=$adressItem.index();$('input[name="type_address"]').val(name_address);$('input[name="street"]').val(street);$('input[name="number-building"]').val(number_building);$('input[name="number-apartment"]').val(number_apartment);$('#houseNumber').trigger('keyup');});if($('#map').length){setTimeout(function(){initialize();if($('#houseNumber').length&&$('#streetAutocomplete').length){if($('input[name="delivery_method"]').val()==='courier'&&$('#houseNumber').val().trim()!==''&&$('#streetAutocomplete').val().trim()!==''){$('#houseNumber').trigger('keyup');}}},50);}var deliveryPrice=$('#map').attr('data-current-delivery-price');if(deliveryPrice==0){$('.price-wrapp .price-delivery').slideUp(0);}setTimeout(function(){if($('[name="delivery_method"]:checked').val()=='courier'){if(!$('[name="first_name"]').val()){$('.errorMsg.empty-name').slideDown(350);}if(!$('[name="phone"]').val()){$('.errorMsg.empty-phone').slideDown(350);}if(!$('[name="street"]').val()||!$('[name="house"]').val()){$('.errorMsg.empty-address').slideDown(350);}$('.errorMsg.select_point').slideUp(350);}else{if(!$('[name="first_name"]').val()){$('.errorMsg.empty-name').slideDown(350);}if(!$('[name="phone"]').val()){$('.errorMsg.empty-phone').slideDown(350);}if(!$('[name="select_point"]').val()){$('.errorMsg.empty-address').slideUp(350);$('.errorMsg.select_point').slideDown(350);}else{$('.errorMsg.select_point').slideUp(350);}}if($('[name="at_time"]').is(':checked')&&(!$('[name="self_delivery_date"]').val()||!$('[name="self_delivery_time"]').val())){$('[name="self_delivery_date"]').addClass('invalid');$('[name="self_delivery_time"]').next().addClass('invalid');$('.errorMsg.empty-delivery-date').slideDown(350);}else{$('[name="self_delivery_date"]').removeClass('invalid');$('[name="self_delivery_time"]').next().removeClass('invalid');$('.errorMsg.empty-delivery-date').slideUp(350);}},1000);$(document).on('keyup','[name="phone"]',function(){if(Inputmask.isValid($(this).val(),{alias:"+38 (099) 999 99 99"})==false){$(this).addClass('invalid');$(this).attr('aria-invalid','true');$('.errorMsg.empty-phone').slideDown(350);}else{$('.errorMsg.empty-phone').slideUp(350);}});$(document).on('keyup','[name="first_name"]',function(){if(!$(this).val()){$('.errorMsg.empty-name').slideDown(350);}else{$('.errorMsg.empty-name').slideUp(350);}});$(document).on('change','[name="at_time"], [name="self_delivery_date"], [name="self_delivery_time"]',function(){if($('[name="at_time"]').is(':checked')&&(!$('[name="self_delivery_date"]').val()||!$('[name="self_delivery_time"]').val())){$('[name="self_delivery_date"]').addClass('invalid');$('[name="self_delivery_time"]').next().addClass('invalid');$('.errorMsg.empty-delivery-date').slideDown(350);}else{$('[name="self_delivery_date"]').removeClass('invalid');$('[name="self_delivery_time"]').next().removeClass('invalid');$('.errorMsg.empty-delivery-date').slideUp(350);}});$(document).on('change','[name="select_point"]',function(e){if($('[name="delivery_method"]:checked').val()=='local_pickup'&&$(this).val()){$('.errorMsg.empty-address').slideUp(350);}});$(document).on('change','[name="delivery_method"]',function(e){if($('[name="delivery_method"]:checked').val()=='courier'){if(!$('[name="street"]').val()||!$('[name="house"]').val()){$('.errorMsg.empty-address').slideDown(350);}$('.errorMsg.select_point').slideUp(350);}else{if(!$('[name="select_point"]').val()){$('.errorMsg.empty-address').slideUp(350);$('.errorMsg.select_point').slideDown(350);}else{$('.errorMsg.select_point').slideUp(350);}}});});